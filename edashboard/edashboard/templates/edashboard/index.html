{% load staticfiles %}

<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href={% static '/edashboard/stylesheet.css'%}>
    <link rel="shortcut icon" href="{% static '/edashboard/images/favicon.ico' %}" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
  </head>
  <body>
    {% include "edashboard/header.html" %}
    <div id="container">
      <div id="left-cont">
        <div id="descr">
          <div id="banner">
            <div id="innerbanner" style="background-image: url({% static '/edashboard/images/NAU2.jpg' %}); background-size:cover;">
              <img id="logo" src="{% static 'edashboard/images/Logo2.png' %}" style="max-width: -webkit-fill-available;">
            </div>
          </div>
          <div id="name">
            <h1 id="head">Energy Dashboard</h1>
          </div>
        </div>
        <div class="chart-container">
          <table class="greencomp">
            <tr>
              <th>
                <h6>Elec Usage:</h6><h6>{{ sum_elec|safe }}</h6><h6>kWh</h6>
              </th>
              <th>
                <h6>Steam Usage:</h6><h6>{{ sum_steam|safe }}</h6><h6>KBTU</h6>
              </th>
            </tr>
            <tr>
              <td><canvas id="pie-chart-elec" width="250" height="150"></canvas></td>
              <td><canvas id="pie-chart-steam" width="250" height="150"></canvas></td>
            </tr>
            <tr>
              <th>
                <h6>Dom Water Usage:</h6><h6>{{ sum_dom|safe }}</h6><h6>G/H</h6>
              </th>
              <th>
                <h6>Reclaimed Water Usage:</h6><h6>{{ sum_reclaimed|safe }}</h6><h6>G/H</h6>
              </th>
            </tr>
            <tr>
              <td><canvas id="pie-chart-domwater" width="250" height="150"></canvas></td>
              <td><canvas id="pie-chart-reclaimed" width="250" height="150"></canvas></td>
            </tr>
          </table>
          <!-- <tr class="chart-line">
            <th class="chart-individual">
              <h5 id="chartTitle">Current Heating Usage:</h5>
              <h5 id="chartNum">BTU/HOURS</h5>
              <canvas id="pie-chart-heat" width="350" height="180"></canvas>
            </th>
            <th class="chart-individual">
              <h5 id="chartTitle">Current Cooling Usage:</h5>
              <h5 id="chartNum">BTU/HOURS</h5>
              <canvas id="pie-chart-cool" width="350" height="180"></canvas>
            </th>
          </tr> -->
        </div>
        <!--  -->
      </div>
      <div id="right-cont">
        <div class="chart-container">
          <!--Chart Title-->
          <h1 id="chartTitle">Current Campus Usage For Monitored Buildings:</h1>
          <h2 id="chartNum">{{sum_all|safe}} BTU/HOURS</h2>
          <!--Chart-->
          <canvas id="pie-chart" width="800" height="450"></canvas>
        </div>
        <!--Chart Labels-->
        <div id="Labels">
          <table class="label" cellpadding="8">
            <tr><td bgcolor="#e3e3e3">Electricity</td><td id="eval">{{elecToBTU|safe}}</td><td class="Labels">BTU/HOURS</td></tr>
            <tr><td bgcolor="#003467" style="color:white">Steam</td><td id="sval">{{steamToBTU|safe}}</td><td class="Labels">BTU/HOURS</td></tr>
            <tr><td bgcolor="#ffcc01">Dom Water</td><td id="dval">{{domToBTU|safe}}</td><td class="Labels">BTU/HOURS</td></tr>
            <tr><td bgcolor="#f31363">Reclaimed Water</td><td id="rval">{{reclaimedToBTU|safe}}</td><td class="Labels">BTU/HOURS</td></tr>
          </table>
        </div>
          <!-- Need python functions to Convert from BTU to kW, Ton, Gas, Dollars and for all combos -->
        <div id="switWrap">
          <!--Units buttons-->
          <h2 style="margin:0;padding:2%;">Compare Usage In Equivalent Units:</h2>
          <div id="switches">
            <button id="btu" onclick="chgColor('btu')">BTU</button>
            <button id="kw" onclick="chgColor('kw')">kWh</button>
            <button id="ton" onclick="chgColor('ton')">Tons</button>
            <button id="gas" onclick="chgColor('gas')">Gas</button>
            <button id="cost" onclick="chgColor('cost')">Cost</button>
          </div>
        </div>
      </div>
    </div>
  </body>
<script>
// {% include "edashboard/scripts/wholepie.js" %}
// {% include "edashboard/scripts/elecpie.js" %}
// {% include "edashboard/scripts/domwaterpie.js" %}
// {% include "edashboard/scripts/reclaimedpie.js" %}
// {% include "edashboard/scripts/steampie.js" %}

// Initializes global const
const curre = document.getElementById("eval").innerHTML;
const currs = document.getElementById("sval").innerHTML;
const currd = document.getElementById("dval").innerHTML;
const currr = document.getElementById("rval").innerHTML;
document.getElementById("btu").style.backgroundColor = "#ffcc01";

// Toggles button color and the labels
function chgColor(id) {
  // Changes colors of buttons
  //Converts to BTUs
  if(document.getElementById("btu").style.backgroundColor == "rgb(255, 204, 1)"){
    document.getElementById("btu").style.backgroundColor = "#e3e3e3";
  }
  // Converts to kWh
  else if(document.getElementById("kw").style.backgroundColor == "rgb(255, 204, 1)"){
    document.getElementById("kw").style.backgroundColor = "#e3e3e3";
  }
  // Converts to Tons
  else if(document.getElementById("ton").style.backgroundColor == "rgb(255, 204, 1)"){
    document.getElementById("ton").style.backgroundColor = "#e3e3e3";
  }
  // Converts to Gas
  else if(document.getElementById("gas").style.backgroundColor == "rgb(255, 204, 1)"){
    document.getElementById("gas").style.backgroundColor = "#e3e3e3";
  }
  // Converts to Dollars
  else{
    document.getElementById("cost").style.backgroundColor = "#e3e3e3";
  }
  // Changes the button to be highlighted
  document.getElementById(id).style.backgroundColor = "#ffcc01";
  chgLabels(id);
}

function chgLabels(id){
  // Changes displayed Labels
  var labels = document.getElementsByClassName("Labels");
  if (id== "kw"){
    for(var i=0; i<labels.length; i++) {
      labels[i].innerHTML= "kW/HOUR";
    }
    document.getElementById("eval").innerHTML= (curre*.00029307107).toFixed(4)
    document.getElementById("sval").innerHTML= (currs*.00029307107).toFixed(4);
    document.getElementById("dval").innerHTML= (currd*.00029307107).toFixed(4);
    document.getElementById("rval").innerHTML= (currr*.00029307107).toFixed(4);
  }
  else if (id=="btu") {
    for(var i=0; i<labels.length; i++) {
      labels[i].innerHTML= "BTU/HOUR";
    }
    document.getElementById("eval").innerHTML= curre;
    document.getElementById("sval").innerHTML= currs;
    document.getElementById("dval").innerHTML= currd;
    document.getElementById("rval").innerHTML= currr;
  }
  else if (id=="ton") {
    for(var i=0; i<labels.length; i++) {
      labels[i].innerHTML= "TONS";
    }
    document.getElementById("eval").innerHTML= (curre*.0008).toFixed(4);
    document.getElementById("sval").innerHTML= (currs*.0008).toFixed(4);
    document.getElementById("dval").innerHTML= (currd*.0008).toFixed(4);
    document.getElementById("rval").innerHTML= (currr*.0008).toFixed(4);
  }
  else if (id=="gas") {
    for(var i=0; i<labels.length; i++) {
      labels[i].innerHTML= "GALLONS";
    }
    document.getElementById("eval").innerHTML= ((curre*.0007)/(8.887*(Math.pow(10,-3)))).toFixed(4);
    document.getElementById("sval").innerHTML= ((currs*.0007)/(8.887*(Math.pow(10,-3)))).toFixed(4);
    document.getElementById("dval").innerHTML= ((currd*.0007)/(8.887*(Math.pow(10,-3)))).toFixed(4);
    document.getElementById("rval").innerHTML= ((currr*.0007)/(8.887*(Math.pow(10,-3)))).toFixed(4);
  }
  else {
    for(var i=0; i<labels.length; i++) {
      labels[i].innerHTML= "DOLLARS";
    }
    document.getElementById("eval").innerHTML= (curre*.00029307107*0.12).toFixed(4);
    document.getElementById("sval").innerHTML= (currs*.00029307107*0.12).toFixed(4);
    document.getElementById("dval").innerHTML= (currd*.00029307107*0.12).toFixed(4);
    document.getElementById("rval").innerHTML= (currr*.00029307107*0.12).toFixed(4);
  }
}

//Code for the chart

</script>
</html>
